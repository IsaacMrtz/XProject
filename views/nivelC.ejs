<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title><%= data.titulo %></title>
  <link rel="stylesheet" href="/resources/css/nivelC.css">
</head>
<body>
  <%- include('partials/nav2') %>

  <main>
    <div class="page-wrapper">
      <div class="nivelC-container">
        
        <!-- Secci√≥n principal con zigzag -->
        <section>
          <br><br>
          
          <div class="path-wrapper zigzag-wrapper">
            <% lecturas.forEach((lec, idx) => { %>
              <a href="/layout?grado=<%= grado %>&id=<%= lec.id %>"
                class="lesson-button <%= lec.estado || '' %>"
                style="--delay: <%= (idx * 0.15).toFixed(2) %>s">
                
                <button class="btn-lesson">
                  <span class="icon"><%= lec.icono || 'üìñ' %></span>
                </button>

                <div class="bubble"><%= lec.titulo %></div>
              </a>
            <% }) %>
          </div>
        </section>

        <!-- Sidebar de estad√≠sticas -->
        <aside class="nivelC-sidebar">
          <div class="stat-card">
            üìö Lecturas:<br>
            <span id="lecturas-leidas"><%= stats.lecturasLeidas %></span> /
            <span id="total-lecturas"><%= stats.totalLecturas %></span>
            <div class="progress-bar">
              <div id="lecturas-bar" 
                   style="width: <%= (stats.lecturasLeidas / stats.totalLecturas) * 100 %>%"></div>
            </div>
          </div>

          <div class="stat-card">
            üéÆ Juegos:<br>
            <span id="juegos-jugados"><%= stats.juegosJugados %></span>
          </div>

          <div class="stat-card">
            üèÖ Nivel:<br>
            <span id="nivel-actual"><%= stats.nivelActual %></span>
          </div>

          <div class="stat-card">
            üöÄ Desaf√≠os activos:<br>
            <span id="desafios-activos"><%= stats.desafiosActivos %></span>
          </div>

          <div class="botones-regreso">
            <a href="javascript:history.back()" class="btn-back">‚Üê Regresar</a>
            <a href="/layout?grado=<%= grado %>" class="btn-back">‚ú® Ingresar</a>
          </div>
        </aside>
      </div>
    </div>

    <script>
      window.appParams = {
        grado: "<%= grado %>",
        id: "<%= id %>"
      };
      window.appStats = {
        lecturasLeidas:  <%= stats.lecturasLeidas %>,
        totalLecturas:   <%= stats.totalLecturas %>,
        juegosJugados:   <%= stats.juegosJugados %>,
        nivelActual:     <%= stats.nivelActual %>,
        desafiosActivos: <%= stats.desafiosActivos %>
      };
    </script>
  </main>
</body>

</html>